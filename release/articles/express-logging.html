<p>Although <a href="http://expressjs.com/">express</a> does not provide a logging
function out of the box it is quite easy to add one.
All you have to do is to add a middleware function that hooks into the request
and calculate the time that was needed to process it.</p>
<p>This is based on some events in the request object that seem not to be
documented.</p>
<pre><code class="lang-javascript">server.use( function(request, response, next) {

        // Start time
        var _st = new Date().getTime();

        // Handler function
        var z = function () {

            // Remove listeners again
            response.removeListener(&#39;finish&#39;, z);
            response.removeListener(&#39;close&#39;,  z);

            // Log that stuff
            console.log(
                request.method,
                request.originalUrl,
                response.statusCode,
                (new Date().getTime() - _st)+&quot;ms&quot;)
            );
        };

        // Attach a listener
        response.on(&#39;finish&#39;,z);
        response.on(&#39;close&#39;, z);

        // Continue processing
        next();
});
</code></pre>
<p>Bascially, we attach a handler function to the response&#39;s <code>finish</code> and
<code>close</code> events that will print some information about the request
and the time that has passed since it was made.</p>
<p>I recommend setting it as the first middleware function depending on
what other middlewares do.</p>
<p><strong>Pro tip:</strong> combine it with a formatting utility and some aligning to get
awesome server logs.</p>
